<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.StackPane?>

<StackPane xmlns:fx="http://javafx.com/fxml" fx:controller="com.loltournamentplanner.controller.LoginController" stylesheets="@styles.css" styleClass="app-root">
    <VBox alignment="CENTER" spacing="0.0">
        <padding>
            <Insets bottom="40.0" left="40.0" right="40.0" top="40.0"/>
        </padding>

        <VBox spacing="24.0" alignment="CENTER" styleClass="card, login-card" maxWidth="400.0">
            <padding>
                <Insets bottom="32.0" left="32.0" right="32.0" top="32.0"/>
            </padding>
            
            <!-- Header -->
            <VBox spacing="4.0" alignment="CENTER">
                <Label text="LoL Tournament Planner" styleClass="title"/>
                <Label fx:id="formModeLabel" text="Sign In" styleClass="subtitle"/>
            </VBox>

            <!-- Login Form -->
            <VBox fx:id="loginForm" spacing="16.0" managed="true" visible="true">
                <!-- Username Field -->
                <VBox spacing="4.0">
                    <Label text="Username" styleClass="field-label"/>
                    <TextField fx:id="loginUsernameField" promptText="Enter your username" styleClass="form-field"/>
                    <Label fx:id="loginUsernameError" styleClass="error-label" managed="false" visible="false"/>
                </VBox>

                <!-- Password Field -->
                <VBox spacing="4.0">
                    <Label text="Password" styleClass="field-label"/>
                    <PasswordField fx:id="loginPasswordField" promptText="Enter your password" styleClass="form-field"/>
                    <Label fx:id="loginPasswordError" styleClass="error-label" managed="false" visible="false"/>
                </VBox>

                <!-- General Error -->
                <Label fx:id="loginGeneralError" styleClass="error-label" managed="false" visible="false" wrapText="true"/>

                <!-- Login Button -->
                <Button text="Sign In" onAction="#onLogin" styleClass="primary-button" maxWidth="Infinity"/>

                <!-- Switch to Register -->
                <HBox spacing="4.0" alignment="CENTER">
                    <Label text="Don't have an account?" styleClass="text-secondary"/>
                    <Label text="Sign Up" styleClass="link-label" onMouseClicked="#onSwitchToRegister"/>
                </HBox>
            </VBox>

            <!-- Register Form -->
            <VBox fx:id="registerForm" spacing="16.0" managed="false" visible="false">
                <!-- Username Field -->
                <VBox spacing="4.0">
                    <Label text="Username" styleClass="field-label"/>
                    <TextField fx:id="registerUsernameField" promptText="Choose a username" styleClass="form-field"/>
                    <Label fx:id="registerUsernameError" styleClass="error-label" managed="false" visible="false"/>
                </VBox>

                <!-- Email Field -->
                <VBox spacing="4.0">
                    <Label text="Email" styleClass="field-label"/>
                    <TextField fx:id="registerEmailField" promptText="Enter your email" styleClass="form-field"/>
                    <Label fx:id="registerEmailError" styleClass="error-label" managed="false" visible="false"/>
                </VBox>

                <!-- Password Field -->
                <VBox spacing="4.0">
                    <Label text="Password" styleClass="field-label"/>
                    <PasswordField fx:id="registerPasswordField" promptText="Create a password" styleClass="form-field"/>
                    <Label fx:id="registerPasswordError" styleClass="error-label" managed="false" visible="false"/>
                    
                    <!-- Password Strength Indicator -->
                    <HBox spacing="8.0" alignment="CENTER_LEFT">
                        <ProgressBar fx:id="passwordStrengthBar" progress="0.0" prefWidth="150.0" prefHeight="6.0" styleClass="password-strength-bar"/>
                        <Label fx:id="passwordStrengthLabel" text="" styleClass="password-strength-label"/>
                    </HBox>
                </VBox>

                <!-- Confirm Password Field -->
                <VBox spacing="4.0">
                    <Label text="Confirm Password" styleClass="field-label"/>
                    <PasswordField fx:id="registerConfirmPasswordField" promptText="Confirm your password" styleClass="form-field"/>
                    <Label fx:id="registerConfirmPasswordError" styleClass="error-label" managed="false" visible="false"/>
                </VBox>

                <!-- General Error -->
                <Label fx:id="registerGeneralError" styleClass="error-label" managed="false" visible="false" wrapText="true"/>

                <!-- Register Button -->
                <Button text="Create Account" onAction="#onRegister" styleClass="primary-button" maxWidth="Infinity"/>

                <!-- Switch to Login -->
                <HBox spacing="4.0" alignment="CENTER">
                    <Label text="Already have an account?" styleClass="text-secondary"/>
                    <Label text="Sign In" styleClass="link-label" onMouseClicked="#onSwitchToLogin"/>
                </HBox>
            </VBox>
        </VBox>
    </VBox>
</StackPane>
